@page "/orderItem"
@inherits OrderItemFormBase
@using AntDesign;

<PageTitle>Order Item Form</PageTitle>

@if (OrderDTO != null && ItemToAdd != null && Items != null && Items.Count() > 0)
{
    <Form Model="@OrderDTO" LabelColSpan="2" WrapperColSpan="4" Size="AntSizeLDSType.Default" ValidateMode="@FormValidateMode.Rules" OnFinish="OnFinishOrder">

        <FormItem Label="Order Comment">
            <TextArea @bind-Value="@OrderDTO.Comment" />
        </FormItem>

    </Form>

    <Form Model="@ItemToAdd" LabelColSpan="2" WrapperColSpan="4" Size="AntSizeLDSType.Default" ValidateMode="@FormValidateMode.Rules" OnFinish="() => OnFinishAddingItemToOrder(ItemToAdd)">

         <FormItem Label="Item" Required Rules=@RuleRequired>
            <SimpleSelect @bind-Value="ItemToAdd.ItemName">
                <SelectOptions>
                    @foreach (var item in Items)
                    {
                        <SimpleSelectOption Value="@item.Name" Label="@item.Name"></SimpleSelectOption>
                    }
                </SelectOptions>
            </SimpleSelect>
        </FormItem> 

        <FormItem Label="Unit of Measurement" Required Rules=@RuleRequired>
            <SimpleSelect @bind-Value="ItemToAdd.UnitOfMeasurement">
                <SelectOptions>
                    <SimpleSelectOption Value="Unit_1" Label="Unit_1"></SimpleSelectOption>
                    <SimpleSelectOption Value="Unit_2" Label="Unit_2"></SimpleSelectOption>
                </SelectOptions>
            </SimpleSelect>
        </FormItem>

        <FormItem Label="Quantity" Required Rules=@QuantityRule>
            <AntDesign.InputNumber @bind-Value="@ItemToAdd.Quantity" />
        </FormItem>

        <FormItem Label="Price" Required Rules=@MoneyRule>
            <AntDesign.InputNumber @bind-Value="@ItemToAdd.PriceWithoutVat" />
        </FormItem>

        <FormItem Label="Comment">
            <TextArea @bind-Value="@ItemToAdd.Comment" />
        </FormItem>

        <FormItem WrapperColOffset="2" WrapperColSpan="4">
            <Button Type="@ButtonType.Primary" HtmlType="submit">
                Add to Order
            </Button>
        </FormItem>
    </Form>
}
else
{
    <p>Loading...</p>
}