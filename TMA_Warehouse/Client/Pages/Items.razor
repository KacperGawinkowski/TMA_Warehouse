@page "/items"
@inherits ItemBase
@using AntDesign;
@using TMA_Warehouse.Client.Models
@using TMA_Warehouse.Shared.DTOs;

@if(Items == null)
{
    <h3>Loading Items...</h3>
}
else
{
    <h3 class="mb-5">Items</h3>

    <h1>
        <button @onclick="@(() => AddItem())" class="btn btn-primary">Add Item</button>
    </h1>

    <input type="text" @oninput="@((value) => SearchForItems(value.Value.ToString()))" placeholder="Search by name..." class="form-control mb-3" />


    if (Items.Count() > 0)
    {

        <Table TItem="ItemFrontendModel" DataSource="@Items">
            <PropertyColumn Property="c=>c.Name" Title="Name" Sortable Filterable></PropertyColumn>
            <PropertyColumn Property="c=>c.ItemGroupName" Title="Item Group" Sortable Filterable></PropertyColumn>
            <PropertyColumn Property="c=>c.UnitOfMeasurementName" Title="Unit of Measurement" Sortable Filterable></PropertyColumn>
            <PropertyColumn Property="c=>c.Quantity" Title="Quantity" Sortable Filterable></PropertyColumn>
            <PropertyColumn Property="c=>c.PriceWithoutVAT" Title="Price" Sortable Filterable></PropertyColumn>
            <PropertyColumn Property="c=>c.Status" Title="Status" Sortable Filterable></PropertyColumn>
            <PropertyColumn Property="c=>c.StorageLocation" Title="Storage Location" Sortable Filterable></PropertyColumn>
            <PropertyColumn Property="c=>c.ContactPerson" Title="Contact Person" Sortable Filterable></PropertyColumn>
            <PropertyColumn Property="c=>c.PhotoURL" Title="Photo"></PropertyColumn>

            <ActionColumn Title="Action">
                <Space Size=@("middle")>
                    <SpaceItem>
                        <Button Type="@ButtonType.Primary" OnClick="()=>UpdateItem(context)">Update</Button>
                    </SpaceItem>
                    <SpaceItem>
                        <Button Danger OnClick="()=>RemoveItem(context)">Delete</Button>
                    </SpaceItem>
                </Space>
            </ActionColumn>

        </Table>
    }
}